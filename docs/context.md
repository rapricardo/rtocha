# Documento de Contexto do Projeto - Automa√ß√£o Inteligente Ricardo Tocha

## 1. Vis√£o Geral do Projeto

O projeto "Automa√ß√£o Inteligente para Marketing e Vendas" de Ricardo Tocha √© uma iniciativa que visa construir uma plataforma digital completa para demonstrar expertise, capturar leads qualificados e entregar valor atrav√©s de automa√ß√µes personalizadas. O projeto tem como objetivo posicionar Ricardo Tocha como refer√™ncia em automa√ß√£o inteligente para profissionais de marketing e vendas que buscam aumentar resultados com menos esfor√ßo.

### 1.1 Posicionamento

**Ricardo Tocha** ajuda profissionais de marketing e vendas a entregar mais resultados, com menos esfor√ßo, atrav√©s da automa√ß√£o de tarefas repetitivas que consomem tempo e agregam pouco valor.

### 1.2 Objetivos de Neg√≥cio

- Demonstrar expertise t√©cnica e posicionamento estrat√©gico
- Gerar leads qualificados atrav√©s de intera√ß√µes de valor
- Estabelecer casos de sucesso para refer√™ncia
- Construir base de conhecimento e conte√∫do relevante
- Criar ferramentas que se tornem ativos de crescimento sustent√°vel

## 2. Arquitetura e Stack Tecnol√≥gico

### 2.1 Tecnologias Principais

- **Front-end**: Next.js (framework React)
- **CMS & Banco de Dados**: Sanity
- **Plataforma de Automa√ß√£o**: n8n
- **CRM**: HubSpot
- **Integra√ß√£o WhatsApp**: Evolution API
- **IA para Conte√∫do**: Gemini (Google)
- **Agentes Inteligentes**: Relevance AI e Relay AI

### 2.2 Arquitetura do Sistema

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îÇ    Frontend     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Sanity CMS     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    n8n          ‚îÇ
‚îÇ    (Next.js)    ‚îÇ     ‚îÇ  (Dados)        ‚îÇ     ‚îÇ  (Automa√ß√µes)   ‚îÇ
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îÇ  HubSpot CRM    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Evolution API   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   IA Agents     ‚îÇ
‚îÇ  (Leads/Vendas) ‚îÇ     ‚îÇ  (WhatsApp)     ‚îÇ     ‚îÇ  (An√°lise)      ‚îÇ
‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ     ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.3 Estrutura de Dados (Sanity)

Principais schemas:
- **Post**: Conte√∫do do blog
- **Author**: Autores de conte√∫do
- **Category**: Categoriza√ß√£o de conte√∫do
- **Lead**: Informa√ß√µes de prospects, incluindo segmento/ind√∫stria e campos de personaliza√ß√£o
- **Service**: Servi√ßos oferecidos com campo `howItWorksSteps` estruturado para visualiza√ß√£o de etapas do fluxo de automa√ß√£o
- **Report**: Relat√≥rios de auditoria
- **Personalization**: Elementos personalizados para diferentes segmentos e contextos
- **Callout**: Componentes de destaque

## 3. Funcionalidades Implementadas

### 3.1 Quiz de Diagn√≥stico Automatizado
- Interface interativa para coleta de dados do lead
- Processamento de respostas e categoriza√ß√£o
- Gera√ß√£o de insights preliminares

### 3.2 Sistema Ass√≠ncrono de Gera√ß√£o de Relat√≥rios
- Solu√ß√£o para o problema de timeout no ambiente Vercel
- Verifica√ß√£o de relat√≥rios existentes
- Sistema de polling para status
- Feedback visual durante processamento

### 3.3 Blog Estruturado
- Estrutura de dados para conte√∫do rica e detalhada
- Suporte a categoriza√ß√£o e tags
- Campos de SEO otimizados

### 3.4 P√°ginas Institucionais
- Home
- Sobre
- Contato

### 3.5 Personaliza√ß√£o para Leads Retornantes
- Sistema de identifica√ß√£o e reconhecimento de leads retornantes implementado via hook `useReturningLead`
- Interface personalizada baseada em hist√≥rico de intera√ß√µes
- Banners personalizados com mensagens contextuais
- Integra√ß√£o com perfil do Sanity para dados persistentes

### 3.6 P√°ginas de Servi√ßo/Produto
- Implementadas p√°ginas din√¢micas em `/solucoes/[slug]` com estrutura modular
- Componentes especializados para diferentes se√ß√µes (Cabe√ßalho, Benef√≠cios, Como Funciona, etc.)
- Visualiza√ß√£o avan√ßada de fluxos de automa√ß√£o com layout alternado esquerda/direita
- Design responsivo com conectores visuais entre passos do fluxo
- Renderiza√ß√£o condicional para se√ß√µes com conte√∫do
- Sistema de personaliza√ß√£o que identifica servi√ßos recomendados para leads retornantes
- Indicadores visuais para servi√ßos recomendados na auditoria
- Navega√ß√£o entre servi√ßos relacionados

### 3.7 API de Leads
- Endpoints REST para acesso program√°tico aos dados de leads armazenados no Sanity
- Autentica√ß√£o Basic Auth para seguran√ßa dos dados sens√≠veis
- Suporte a filtragem por data de atualiza√ß√£o e personaliza√ß√£o dos dados retornados
- Integra√ß√£o com Redis para cache de leads, otimizando o uso em agentes de WhatsApp e outros servi√ßos
- Dois endpoints principais implementados:
  - `/api/leads/export`: Consulta completa de leads com op√ß√µes de filtragem
  - `/api/leads/get-by-id`: Consulta espec√≠fica de um lead por ID

## 4. Funcionalidades em Desenvolvimento/Planejadas

### 4.1 Melhorias nas P√°ginas de Servi√ßo
- ‚úÖ Visualiza√ß√£o de fluxos de automa√ß√£o com layout alternado e conectores visuais
- Anima√ß√µes e interatividade adicional para a visualiza√ß√£o de fluxos (expans√£o de detalhes, etc.)
- Integra√ß√£o com imagens geradas por IA (via Replicate API)
- Personaliza√ß√£o por segmento/ind√∫stria
- Calculadoras de ROI espec√≠ficas por servi√ßo
- Se√ß√£o de testemunhos de clientes
- Demonstra√ß√µes interativas das automa√ß√µes oferecidas
- Schema.org e metadados avan√ßados para SEO

### 4.2 Integra√ß√£o com Redes Sociais
- Webhooks para publica√ß√£o autom√°tica de conte√∫do
- Gera√ß√£o de formatos adaptados para cada rede
- Agendamento e an√°lise de performance

### 4.3 Sistema de Nutri√ß√£o de Email
- Fluxos automatizados baseados em interesses
- Segmenta√ß√£o por engajamento e perfil
- M√©tricas de convers√£o e ajustes

### 4.4 Assistente via WhatsApp
- Chatbot conversacional para qualifica√ß√£o
- Entreg√°veis personalizados automatizados
- Agendamento de reuni√µes

## 5. Estado Atual por M√≥dulo

| M√≥dulo | Estado | Pr√≥ximas Etapas |
|--------|--------|-----------------|
| **Quiz de Diagn√≥stico** | ‚úÖ Implementado | Otimiza√ß√£o de UX |
| **Gera√ß√£o de Relat√≥rios** | ‚úÖ Implementado | Melhorar persist√™ncia |
| **Blog** | üü° Parcial | Implementar webhooks |
| **Personaliza√ß√£o** | ‚úÖ Implementado | Expandir personaliza√ß√£o |
| **P√°ginas de Servi√ßo** | ‚úÖ Implementado | Adicionar calculadoras de ROI e conte√∫do completo |
| **WhatsApp** | ‚úÖ Implementado | Configurar Evolution API |
| **Redes Sociais** | ‚úÖ Implementado | Configurar webhooks n8n |
| **Email Marketing** | üî¥ N√£o iniciado | Definir fluxos e triggers |
| **API de Leads** | ‚úÖ Implementado | Expandir endpoints e otimizar cache Redis |
| **Visualiza√ß√£o de Fluxos** | ‚úÖ Implementado | Adicionar dados estruturados a todos os servi√ßos |

## 6. Estrutura de Arquivos do Projeto

### 6.1 Principais Componentes e P√°ginas

```
/app
  /api
    /audit-quiz
      /submit
      /request-report
      /report-status
      /generate-report
  /mini-auditoria
  /blog
  /solucoes
    /page.tsx
    /[slug]
      /page.tsx
  /relatorios

/components
  /audit-quiz
    AuditQuiz.tsx
    QuizComplete.tsx
  /layout
  /ui
  /blog
  /services
    ServiceHeader.tsx
    ServiceBenefits.tsx
    ServiceHowItWorks.tsx
    AutomationFlowSteps.tsx
    ServiceRequirements.tsx
    ServiceMetrics.tsx
    PersonalizedServiceBanner.tsx
    RelatedServices.tsx
  /personalization
    WelcomeBackBanner.tsx

/lib
  /services
    reportStatus.ts
    serviceQueries.ts
    serviceUtils.ts
  /hooks
    useReturningLead.ts
  /portable-text
    components.tsx
  /ai
    gemini.ts
  /sanity
  /types.ts
```

### 6.2 Fluxos de Dados Principais

1. **Fluxo de Diagn√≥stico e Relat√≥rio**:
   ```
   Quiz ‚Üí API ‚Üí Processamento ‚Üí Relat√≥rio ‚Üí Follow-up
   ```

2. **Fluxo de Blog e Redes Sociais**:
   ```
   Sanity ‚Üí Webhook ‚Üí n8n ‚Üí Adapta√ß√£o ‚Üí Publica√ß√£o
   ```

3. **Fluxo de Personaliza√ß√£o**:
   ```
   Identifica√ß√£o ‚Üí Recupera√ß√£o de Dados ‚Üí Renderiza√ß√£o Personalizada
   ```

4. **Fluxo de P√°ginas de Servi√ßo**:
   ```
   Requisi√ß√£o ‚Üí Query Sanity ‚Üí Verifica√ß√£o de Lead ‚Üí Personaliza√ß√£o ‚Üí Renderiza√ß√£o
   ```

## 7. Prioridades Atuais

### 7.1 Prioridade Alta
1. **Completar dados no Sanity para servi√ßos**
   - Preencher completamente os campos de servi√ßos no Sanity
   - Adicionar dados estruturados de passos para cada servi√ßo utilizando o campo `howItWorksSteps`
   - Adicionar imagens de qualidade para cada servi√ßo
   - Verificar todos os cen√°rios de personaliza√ß√£o

2. **Integra√ß√£o com APIs externas**
   - Desenvolver integra√ß√£o com Perplexity e LinkedIn
   - Expandir uso do webhook Sanity -> n8n j√° configurado
   - Otimizar fluxos de processamento ass√≠ncrono

3. **Rastreamento e m√©tricas**
   - Implementar sistema de eventos para rastreamento detalhado de intera√ß√µes
   - Configurar dashboard de convers√£o espec√≠fico para leads retornantes
   - Adicionar rastreamento de cliques e convers√µes para an√°lise

4. **Verificar e corrigir campos do quiz de auditoria**
   - Auditar campos n√£o salvos no Sanity
   - Garantir que todos os dados coletados estejam sendo persistidos
   - Otimizar estrutura de dados para melhor an√°lise

### 7.2 Prioridade M√©dia
1. **Calculadoras de ROI**
   - Desenvolver calculadoras por servi√ßo com valores pr√©-preenchidos
   - Integrar estimativas de ganho com dados do setor do lead

2. **Webhooks para redes sociais**
   - Configura√ß√£o do n8n
   - Templates por rede social
   - Sistema de programa√ß√£o

3. **Continuidade do blog**
   - Calend√°rio editorial
   - Otimiza√ß√£o de SEO
   - M√©tricas de performance

### 7.3 Prioridade Baixa
1. **Nutri√ß√£o de email**
   - Configura√ß√£o de sequ√™ncias
   - Integra√ß√£o com HubSpot
   - Relat√≥rios de desempenho

2. **Testemunhos e casos de sucesso**
   - Implementar se√ß√£o de depoimentos de clientes por servi√ßo
   - Criar estrutura para casos de uso segmentados

## 8. Aspectos T√©cnicos e Desafios

### 8.1 Desafios Atuais
- Persist√™ncia confi√°vel dos estados no sistema ass√≠ncrono
- Manuten√ß√£o de conte√∫do estruturado no Sanity
- Consist√™ncia visual entre personaliza√ß√£o e design base

### 8.2 Considera√ß√µes de Escalabilidade
- Crescimento potencial da base de leads
- Aumento de demanda de processamento para relat√≥rios
- Necessidade de cache estrat√©gico

### 8.3 Seguran√ßa e Privacidade
- Conformidade com LGPD
- Prote√ß√£o de dados de leads
- Acesso controlado a informa√ß√µes sens√≠veis

## 9. Plano de Implementa√ß√£o

### 9.1 Curto Prazo (Pr√≥ximas 2 Semanas)
1. ‚úÖ Implementar visualiza√ß√£o de fluxos no componente `ServiceHowItWorks`
2. Completar dados no Sanity com conte√∫do formatado
3. Adicionar dados estruturados para todos os servi√ßos no campo `howItWorksSteps`
4. Implementar rastreamento b√°sico de intera√ß√µes
5. Configurar webhook Sanity -> n8n para processamento ass√≠ncrono

### 9.2 M√©dio Prazo (1-2 Meses)
1. Integrar com Replicate para gera√ß√£o de imagens personalizadas
2. Desenvolver calculadoras de ROI espec√≠ficas por servi√ßo
3. Implementar se√ß√£o de depoimentos de clientes
4. Configurar webhooks para redes sociais
5. Implementar schema.org e metadados avan√ßados para SEO

### 9.3 Longo Prazo (3-6 Meses)
1. Implementar assistente de WhatsApp
2. Sistema completo de nutri√ß√£o por email
3. Expans√£o para modelos preditivos de recomenda√ß√£o
4. Adicionar demonstra√ß√µes interativas das automa√ß√µes oferecidas

## 10. Colabora√ß√£o e Workflow

### 10.1 Metodologia de Desenvolvimento
- Desenvolvimento incremental baseado em prioridade
- Revis√µes peri√≥dicas de c√≥digo e arquitetura
- Documenta√ß√£o cont√≠nua de decis√µes e aprendizados

### 10.2 Pol√≠tica de Versionamento
- Controle de vers√£o via Git
- Ambientes de desenvolvimento, teste e produ√ß√£o
- Estrat√©gia de releases progressivos

## 11. Conclus√£o e Pr√≥ximos Passos Priorit√°rios

O projeto encontra-se em fase avan√ßada, com v√°rias funcionalidades essenciais implementadas, incluindo as p√°ginas de servi√ßo, personaliza√ß√£o para leads retornantes, API de leads e visualiza√ß√£o de fluxos de automa√ß√£o. As prioridades imediatas s√£o:

1. Adicionar dados estruturados no campo `howItWorksSteps` para todos os servi√ßos no Sanity
2. Verificar e corrigir campos do quiz de auditoria que n√£o est√£o sendo salvos
3. Expandir uso do webhook Sanity -> n8n j√° configurado para integra√ß√µes adicionais
4. Implementar rastreamento e m√©tricas de convers√£o

Este documento serve como refer√™ncia central para o estado atual do projeto e diretrizes para o desenvolvimento cont√≠nuo, refletindo as implementa√ß√µes recentes e os pr√≥ximos passos.